<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>ProSalesB2B 2025 — программа конференции</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-fade-in {
      animation: fade-in 0.25s ease-out;
    }

    /* Анимация и состояния звезды */
    .star-toggle {
      transition: transform 0.15s ease-out, color 0.15s ease-out, opacity 0.15s ease-out,
        background-color 0.15s ease-out;
    }
    .star-toggle.clicked {
      transform: scale(1.15);
    }

    /* Кнопка избранного (режим) */
    .favorites-toggle {
      transition: box-shadow 0.2s ease-out, transform 0.2s ease-out, background-color 0.2s ease-out,
        color 0.2s ease-out;
    }
    .favorites-toggle.favorites-on {
      background-color: rgb(250 204 21); /* приблизительно text-yellow-400 */
      color: #020617;
      box-shadow: 0 18px 40px rgba(250, 204, 21, 0.4);
    }

    /* Вкладки потоков */
    .stream-tab {
      transition: background-color 0.15s ease-out, color 0.15s ease-out, border-color 0.15s ease-out,
        transform 0.15s ease-out;
    }
    .stream-tab.tab-active {
      background-color: rgb(15 23 42); /* slate-900 */
      color: rgb(248 250 252); /* slate-50 */
      border-color: rgb(148 163 184); /* slate-400/ish */
      transform: translateY(-1px);
    }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 font-sans">
  <!-- Скрытый див, чтобы Tailwind CDN "подхватил" нужные классы для динамики -->
  <div class="hidden text-yellow-400 text-slate-400 opacity-40"></div>

  <!-- Navbar -->
  <header class="sticky top-0 z-20 bg-slate-950/80 backdrop-blur border-b border-slate-800">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between gap-4">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-2xl bg-emerald-500 text-slate-950 flex items-center justify-center text-sm font-semibold shadow-md shadow-emerald-500/30">
          P
        </div>
        <div class="flex flex-col">
          <span class="text-lg sm:text-xl font-bold tracking-tight">ProSalesB2B</span>
          <span class="text-xs text-slate-400">Конференция по B2B-продажам</span>
        </div>
      </div>

      <div class="flex-1 max-w-md">
        <label class="relative block">
          <span class="sr-only">Поиск доклада или спикера</span>
          <span class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-500">
            <!-- Heroicons outline: Magnifying glass -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
              <path d="M15.75 15.75L20 20" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
              <circle cx="11" cy="11" r="5.5" stroke="currentColor" stroke-width="1.8" />
            </svg>
          </span>
          <input
            id="searchInput"
            type="search"
            class="w-full rounded-2xl border border-slate-700 bg-slate-900/80 py-2.5 pl-9 pr-3 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition"
            placeholder="Поиск доклада или спикера" />
        </label>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-10">
    <!-- Intro -->
    <section class="mb-8 sm:mb-10">
      <div class="bg-slate-900/80 rounded-3xl shadow-lg shadow-black/40 border border-slate-800 p-6 sm:p-8">
        <div class="flex flex-col gap-6 md:flex-row md:items-start md:justify-between">
          <div class="max-w-2xl">
            <h1 class="text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-tight mb-4">
              ProSalesB2B 2025
            </h1>
            <p class="text-sm sm:text-base text-slate-200/90 leading-relaxed mb-3">
              ProSalesB2B — конференция по B2B-продажам от Контура.
            </p>
            <p class="text-sm sm:text-base text-slate-200/90 leading-relaxed mb-3">
              <span class="font-semibold text-emerald-400">6 сентября 2025</span>, Екатеринбург, Домна + онлайн. Бесплатная регистрация.
            </p>
            <p class="text-sm sm:text-base text-slate-200/90 leading-relaxed">
              Для специалистов по продажам, руководителей, тимлидов и всех, кто живёт B2B.
            </p>
          </div>

          <div class="mt-2 md:mt-0">
            <div class="inline-flex flex-col items-start gap-2 rounded-3xl border border-slate-800 bg-slate-900/80 px-5 py-4 shadow-inner shadow-black/40">
              <div class="flex items-center gap-2 text-xs font-medium uppercase tracking-wide text-slate-400">
                <!-- Heroicons: Calendar Days -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
                  <rect x="3.5" y="5" width="17" height="15.5" rx="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M8 4V6.5M16 4V6.5M3.5 9.5H20.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Формат
              </div>
              <div class="flex flex-col gap-2 text-sm">
                <div class="flex items-center gap-2">
                  <span class="inline-flex h-2 w-2 rounded-full bg-emerald-400 shadow shadow-emerald-400/60"></span>
                  <span class="text-slate-100">Офлайн — Домна, Екатеринбург</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="inline-flex h-2 w-2 rounded-full bg-sky-400 shadow shadow-sky-400/60"></span>
                  <span class="text-slate-100">Онлайн — трансляция</span>
                </div>
                <span class="inline-flex mt-2 rounded-full bg-emerald-500/10 border border-emerald-500/40 px-3 py-1 text-xs font-medium text-emerald-300">
                  Бесплатная регистрация
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Track filter + Stream tabs -->
    <section class="mb-6 sm:mb-8">
      <div class="flex flex-col gap-4">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
          <div>
            <h2 class="text-xl sm:text-2xl font-semibold tracking-tight">Программа</h2>
            <p class="text-xs sm:text-sm text-slate-400 mt-1">
              Время указано по местному времени (Екатеринбург).
            </p>
          </div>
          <div class="flex items-center gap-2">
            <label for="trackFilter" class="text-xs sm:text-sm text-slate-300 whitespace-nowrap">
              Трек:
            </label>
            <div class="relative">
              <select
                id="trackFilter"
                class="text-sm rounded-2xl border border-slate-700 bg-slate-900/90 pl-3 pr-9 py-2 text-slate-100 shadow-sm shadow-black/40 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 appearance-none">
                <option>Все треки</option>
                <option>Продажи</option>
                <option>AI &amp; Инструменты</option>
                <option>Лидерство</option>
                <option>Коммуникации</option>
              </select>
              <!-- Heroicons: Chevron Down -->
              <span class="pointer-events-none absolute inset-y-0 right-2.5 flex items-center text-slate-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
                  <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
            </div>
          </div>
        </div>

        <!-- Вкладки потоков -->
        <div class="flex flex-wrap gap-2 text-xs sm:text-sm">
          <button
            type="button"
            class="stream-tab tab-active inline-flex items-center gap-1 rounded-full border border-slate-700 bg-slate-900 px-3 py-1.5 text-slate-300"
            data-stream-tab="Все">
            <span>Все</span>
          </button>
          <button
            type="button"
            class="stream-tab inline-flex items-center gap-1 rounded-full border border-slate-800 bg-slate-950 px-3 py-1.5 text-slate-400"
            data-stream-tab="Поток 1">
            <span>Поток 1</span>
          </button>
          <button
            type="button"
            class="stream-tab inline-flex items-center gap-1 rounded-full border border-slate-800 bg-slate-950 px-3 py-1.5 text-slate-400"
            data-stream-tab="Поток 2">
            <span>Поток 2</span>
          </button>
          <button
            type="button"
            class="stream-tab inline-flex items-center gap-1 rounded-full border border-slate-800 bg-slate-950 px-3 py-1.5 text-slate-400"
            data-stream-tab="Поток 3">
            <span>Поток 3</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Talks list -->
    <section>
      <div id="talks-container" class="space-y-4 sm:space-y-5 mb-8">
        <!-- Карточки сессий будут отрендерены из JS -->
      </div>

      <div class="flex justify-center">
        <div class="flex flex-col items-center gap-2 sm:flex-row sm:gap-4">
          <button
            id="favoritesToggleBtn"
            type="button"
            class="favorites-toggle inline-flex items-center gap-2 rounded-full bg-emerald-500 text-slate-950 text-sm font-medium px-5 py-2.5 shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/40 hover:-translate-y-0.5 active:translate-y-0 transition">
            <!-- Heroicons: Star -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none">
              <path d="M11.48 3.5a.75.75 0 011.04 0l2.14 2.26 2.96.69a.75.75 0 01.45 1.16L16.7 10.7l.32 2.99a.75.75 0 01-1.08.74L12 12.96l-3.94 1.47a.75.75 0 01-1.08-.74l.32-2.99-1.37-3.09a.75.75 0 01.45-1.16l2.96-.69 2.14-2.26z" stroke="currentColor" stroke-width="1.4" fill="none" stroke-linejoin="round"/>
            </svg>
            <span id="favoritesToggleLabel">Показать избранное</span>
          </button>
          <div class="text-xs sm:text-sm text-slate-400">
            Избранные: <span id="favoritesCount">0</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- JS: данные и отрисовка карточек -->
  <script>
    const talks = [
      {
        id: 1,
        start: "12:00",
        end: "12:20",
        title: "Открытие конференции",
        speakers: "Организаторы ProSalesB2B",
        track: "Продажи",
        room: "Главная сцена"
      },
      {
        id: 2,
        start: "12:30",
        end: "13:20",
        title: "От продукта к человеку. Как сделать клиента сердцем вашего бизнеса?",
        speakers: "Евгений Щепин",
        track: "Продажи",
        room: "Главная сцена"
      },
      {
        id: 3,
        start: "13:30",
        end: "14:20",
        title: "Дискуссия: все кругом продажи",
        speakers: "Эксперты Контура, Сбера, Т-Банка, Жизньмарта",
        track: "Продажи",
        room: "Главная сцена"
      },
      {
        id: 4,
        start: "15:00",
        end: "15:30",
        title: "Перерыв",
        speakers: "",
        track: "Продажи",
        room: "Холл, фудкорт"
      },
      // Поток 1 (AI & Инструменты)
      {
        id: 5,
        start: "15:30",
        end: "16:15",
        title: "Как ИИ анализирует переговоры и делает оценку объективной?",
        speakers: "Ангелина Будина, Александр Таран",
        track: "AI & Инструменты",
        room: "Поток 1"
      },
      {
        id: 6,
        start: "15:30",
        end: "16:15",
        title: "Как ИИ помогает руководителю: от анализа данных до автоматизации рутинных задач?",
        speakers: "Павел Скрипниченко",
        track: "AI & Инструменты",
        room: "Поток 1"
      },
      {
        id: 7,
        start: "15:30",
        end: "16:15",
        title: "Как писать клиенту, чтобы он отвечал?",
        speakers: "Валерия Дубчак, Роман Вайман",
        track: "AI & Инструменты",
        room: "Поток 1"
      },
      {
        id: 8,
        start: "17:00",
        end: "17:45",
        title: "Финансовая грамотность",
        speakers: "Ксения Падерина",
        track: "AI & Инструменты",
        room: "Поток 1"
      },
      // Поток 2 (Лидерство)
      {
        id: 9,
        start: "15:30",
        end: "16:15",
        title: "Адаптивный интеллект — ключевой навык в эпоху перемен",
        speakers: "Дарья Штинова",
        track: "Лидерство",
        room: "Поток 2"
      },
      {
        id: 10,
        start: "16:30",
        end: "17:15",
        title: "Как общаться с трудными людьми: слышать, понимать, договариваться и справляться с эмоциями",
        speakers: "Кирилл Денисов",
        track: "Лидерство",
        room: "Поток 2"
      },
      // Поток 3 (Коммуникации)
      {
        id: 11,
        start: "15:30",
        end: "16:15",
        title: "Выбор стратегии поведения в переговорах: что спрашивать, о чём говорить и о чём молчать",
        speakers: "Надежда Домрачева",
        track: "Коммуникации",
        room: "Поток 3"
      },
      {
        id: 12,
        start: "16:00",
        end: "16:45",
        title: "Инновационное лидерство",
        speakers: "Николай Женишек, Ольга Омельченко",
        track: "Коммуникации",
        room: "Поток 3"
      },
      {
        id: 13,
        start: "16:30",
        end: "17:15",
        title: "Как наши тараканы влияют на коммуникацию с людьми и как с помощью личных качеств создавать крутые команды",
        speakers: "Мария Бобкова",
        track: "Коммуникации",
        room: "Поток 3"
      },
      {
        id: 14,
        start: "18:00",
        end: "18:15",
        title: "Завершение конференции",
        speakers: "Организаторы ProSalesB2B",
        track: "Продажи",
        room: "Главная сцена"
      }
    ];

    let currentTrackFilter = "Все треки";
    let currentSearchQuery = "";
    let currentStreamTab = "Все";
    let favorites = new Set();
    let favoritesOnly = false;

    function normalizeString(str) {
      return (str || "").toString().toLowerCase();
    }

    function talkMatchesFilters(talk) {
      // Фильтр по треку
      if (currentTrackFilter && currentTrackFilter !== "Все треки") {
        if (talk.track !== currentTrackFilter) return false;
      }

      // Фильтр по вкладке потока
      if (currentStreamTab && currentStreamTab !== "Все") {
        if (talk.room !== currentStreamTab) return false;
      }

      // Фильтр по избранному
      if (favoritesOnly && !favorites.has(talk.id)) {
        return false;
      }

      // Фильтр по поиску
      const q = normalizeString(currentSearchQuery).trim();
      if (!q) return true;

      const inTitle = normalizeString(talk.title).includes(q);
      const inSpeakers = normalizeString(talk.speakers).includes(q);

      return inTitle || inSpeakers;
    }

    function updateStarVisual(button, isActive) {
      if (!button) return;
      button.classList.add("star-toggle");
      button.classList.remove("text-yellow-400", "text-slate-400", "opacity-40");

      if (isActive) {
        button.classList.add("text-yellow-400");
      } else {
        button.classList.add("text-slate-400", "opacity-40");
      }
    }

    function updateFavoritesCount() {
      const countEl = document.getElementById("favoritesCount");
      if (countEl) {
        countEl.textContent = favorites.size;
      }
    }

    function saveFavoritesToStorage() {
      try {
        const serialized = JSON.stringify(Array.from(favorites));
        window.localStorage.setItem("favorites", serialized);
      } catch (e) {
        // ignore
      }
    }

    function loadFavoritesFromStorage() {
      try {
        const saved = window.localStorage.getItem("favorites");
        if (!saved) return;
        const arr = JSON.parse(saved);
        if (Array.isArray(arr)) {
          favorites = new Set(arr.map((id) => Number(id)));
        }
      } catch (e) {
        favorites = new Set();
      }
    }

    function createTalkCard(talk) {
      const card = document.createElement("article");
      card.className =
        "relative flex gap-4 sm:gap-6 rounded-3xl bg-slate-900/80 border border-slate-800 shadow-lg shadow-black/40 px-4 py-4 sm:px-6 sm:py-5 hover:shadow-xl hover:border-slate-700 transition animate-fade-in";

      const hasEnd = Boolean(talk.end);

      card.innerHTML = `
        <div class="flex flex-col items-start justify-center w-20 sm:w-24 flex-shrink-0">
          <div class="text-xs uppercase tracking-wide text-slate-500 mb-1">Начало</div>
          <div class="text-lg sm:text-xl font-semibold tabular-nums text-slate-50">${talk.start}</div>
          ${hasEnd ? `<div class="text-xs text-slate-500 mt-0.5">до ${talk.end}</div>` : ""}
        </div>
        <div class="flex-1 min-w-0">
          <div class="flex items-start gap-2 pr-8">
            <h3 class="text-sm sm:text-base md:text-lg font-semibold tracking-tight text-slate-50">
              ${talk.title}
            </h3>
          </div>
          <div class="mt-1.5 flex flex-wrap items-center gap-2 text-xs sm:text-sm text-slate-300">
            ${talk.speakers ? `<span class="font-medium text-slate-100">${talk.speakers}</span>` : ""}
          </div>
          <div class="mt-3 flex flex-wrap items-center gap-2 text-xs">
            <span class="inline-flex items-center rounded-full border border-emerald-500/40 bg-emerald-500/10 px-2.5 py-1 font-medium text-emerald-300">
              ${talk.track}
            </span>
            <span class="inline-flex items-center rounded-full border border-slate-700 bg-slate-900 px-2.5 py-1 text-slate-300">
              Зал: ${talk.room}
            </span>
          </div>
        </div>
        <button
          type="button"
          aria-label="Добавить в избранное"
          data-role="favorite-toggle"
          class="absolute right-3 top-3 inline-flex items-center justify-center rounded-full p-1.5 hover:bg-slate-800/80">
          <!-- Heroicons: Star (outline) -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-5 sm:w-5" viewBox="0 0 24 24" fill="none">
            <path
              d="M11.48 3.5a.75.75 0 011.04 0l2.14 2.26 2.96.69a.75.75 0 01.45 1.16L16.7 10.7l.32 2.99a.75.75 0 01-1.08.74L12 12.96l-3.94 1.47a.75.75 0 01-1.08-.74l.32-2.99-1.37-3.09a.75.75 0 01.45-1.16l2.96-.69 2.14-2.26z"
              stroke="currentColor"
              stroke-width="1.5"
              fill="none"
              stroke-linejoin="round" />
          </svg>
        </button>
      `;

      const starButton = card.querySelector('[data-role="favorite-toggle"]');
      if (starButton) {
        const isActive = favorites.has(talk.id);
        updateStarVisual(starButton, isActive);

        starButton.addEventListener("click", (event) => {
          event.stopPropagation();
          const currentlyFavorite = favorites.has(talk.id);
          if (currentlyFavorite) {
            favorites.delete(talk.id);
          } else {
            favorites.add(talk.id);
          }
          saveFavoritesToStorage();
          updateFavoritesCount();

          // Анимация клика
          starButton.classList.add("clicked");
          setTimeout(() => {
            starButton.classList.remove("clicked");
          }, 150);

          // Обновляем визуальное состояние звезды
          updateStarVisual(starButton, !currentlyFavorite);

          // Если включён режим "Только избранное" и мы снимаем звезду — обновляем ленту
          if (favoritesOnly && currentlyFavorite) {
            renderTalks();
          }
        });
      }

      return card;
    }

    function createEmptyStateCard() {
      const card = document.createElement("article");
      card.className =
        "flex flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-700 bg-slate-900/60 px-6 py-10 text-center shadow-inner shadow-black/40 animate-fade-in";

      card.innerHTML = `
        <div class="flex items-center justify-center w-12 h-12 rounded-2xl bg-slate-800/80 border border-slate-700">
          <!-- Heroicons: Inbox -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400" viewBox="0 0 24 24" fill="none">
            <path d="M4 13.5l1-7A1.5 1.5 0 016.48 5h11.04A1.5 1.5 0 0119 6.5l1 7v4a1.5 1.5 0 01-1.5 1.5h-13A1.5 1.5 0 014 17.5v-4z" stroke="currentColor" stroke-width="1.5" />
            <path d="M4 13.5h4l1.2 2a2 2 0 001.7 1h2.2a2 2 0 001.7-1l1.2-2h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <div class="text-base sm:text-lg font-medium text-slate-50">
          Нет докладов по запросу
        </div>
        <p class="text-sm text-slate-400 max-w-sm">
          Попробуйте изменить текст поиска, трек или поток, чтобы увидеть другие доклады.
        </p>
      `;

      return card;
    }

    function renderTalks() {
      const container = document.getElementById("talks-container");
      container.innerHTML = "";

      const filteredTalks = talks
        .slice()
        .sort((a, b) => a.start.localeCompare(b.start))
        .filter(talkMatchesFilters);

      if (!filteredTalks.length) {
        container.appendChild(createEmptyStateCard());
        return;
      }

      filteredTalks.forEach((talk) => {
        container.appendChild(createTalkCard(talk));
      });
    }

    function updateFavoritesToggleButton() {
      const btn = document.getElementById("favoritesToggleBtn");
      const label = document.getElementById("favoritesToggleLabel");
      if (!btn || !label) return;

      if (favoritesOnly) {
        btn.classList.add("favorites-on");
        label.textContent = "Показать все доклады";
      } else {
        btn.classList.remove("favorites-on");
        label.textContent = "Показать избранное";
      }
    }

    function initStreamTabs() {
      const tabs = document.querySelectorAll("[data-stream-tab]");
      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          currentStreamTab = tab.getAttribute("data-stream-tab") || "Все";

          tabs.forEach((t) => t.classList.remove("tab-active"));
          tab.classList.add("tab-active");

          renderTalks();
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      const trackSelect = document.getElementById("trackFilter");
      const searchInput = document.getElementById("searchInput");
      const favoritesToggleBtn = document.getElementById("favoritesToggleBtn");

      // Восстанавливаем фильтр по треку из localStorage
      const savedTrack = window.localStorage.getItem("prosalesb2b_track_filter");
      if (savedTrack && Array.from(trackSelect.options).map((o) => o.value).includes(savedTrack)) {
        trackSelect.value = savedTrack;
        currentTrackFilter = savedTrack;
      } else {
        currentTrackFilter = trackSelect.value;
      }

      // Загружаем избранное
      loadFavoritesFromStorage();
      updateFavoritesCount();

      // Обработчики
      trackSelect.addEventListener("change", () => {
        currentTrackFilter = trackSelect.value;
        window.localStorage.setItem("prosalesb2b_track_filter", currentTrackFilter);
        renderTalks();
      });

      searchInput.addEventListener("input", () => {
        currentSearchQuery = searchInput.value || "";
        renderTalks();
      });

      if (favoritesToggleBtn) {
        favoritesToggleBtn.addEventListener("click", () => {
          favoritesOnly = !favoritesOnly;
          updateFavoritesToggleButton();
          renderTalks();
        });
      }

      // Инициализируем вкладки потоков
      initStreamTabs();

      // Первичная отрисовка
      updateFavoritesToggleButton();
      renderTalks();
    });
  </script>
</body>
</html>
